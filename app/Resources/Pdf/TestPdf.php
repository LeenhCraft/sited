<?php
$test = $data["test"];
/**
 * Vista para exportar informe médico de evaluación de riesgo de diabetes como PDF
 * @var array $test Datos del test
 */

// Definir los iconos como SVG en base64
$iconStethoscope = 'data:image/svg+xml;base64,' . base64_encode('<svg width="800px" height="800px" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--noto" preserveAspectRatio="xMidYMid meet"><path d="M60.55 98.3c-16.79 4.83-26.01-18.83-29.53-27.27C24 54.17 5.69 42.41 7.04 30s16.6-11.17 16.6-11.17" fill="none" stroke="#bdbdbd" stroke-width="6" stroke-linejoin="round" stroke-miterlimit="10"></path><path d="M59.5 98.3c16.89-4.48 11.39-28.91 10.07-37.96c-2.63-18.08 7.04-37.57-.49-47.52S49.1 11.76 49.1 11.76" fill="none" stroke="#bdbdbd" stroke-width="6" stroke-linejoin="round" stroke-miterlimit="10"></path><circle cx="101.84" cy="32.23" r="15.25" fill="#878787"></circle><circle cx="102.38" cy="31.13" r="13.41" fill="#bdbdbd"></circle><path d="M69.39 58.93c-.89 6.74 10.14 31.36-6.97 38.1c-19.16 7.56-26.31-20.55-31.39-26" fill="none" stroke="#03a9f4" stroke-width="8" stroke-miterlimit="10"></path><path d="M32.63 73.54s10.77 11.36 23.4 6.15C68 74.75 69.86 61.64 69.86 61.64" fill="none" stroke="#03a9f4" stroke-width="5" stroke-miterlimit="10"></path><path d="M100.96 21.43c-5.24 1.22-8.49 6.45-7.28 11.69c.18.78.46 1.54.83 2.26l.68 1.34c-1.92 2.51-3.48 3.47-4.01 6.38c1.36 1.33 2.95 2.39 4.69 3.13c0-.01.01-.02.01-.03c0 .01.01.02.01.04c2.87 1.22 6.14 1.59 9.42.83c.37-.09.72-.2 1.07-.31l-.31-2.8s.4-3.55.49-3.74c.23-.45 1.16-.69 1.64-.97c1.16-.7 2.17-1.65 2.95-2.76a9.802 9.802 0 0 0 1.5-7.78c-1.22-5.24-6.46-8.5-11.69-7.28z" opacity=".22" fill="#212121"></path><path d="M60.42 96.03c9.59 21.97 24.29 25.08 35.15 23.19c9.54-1.67 22.17-10.22 22.14-25.72c-.04-18.68-12.5-17.5-19.25-29.47c-8.41-14.92 3.05-28.62 3.05-28.62" fill="none" stroke="#03a9f4" stroke-width="8" stroke-miterlimit="10"></path><path d="M94.74 38.77s1.9-.97 3.72.07c2.88 1.64 3.16 3.98 3.16 3.98s1.74-3.46 2.67-4.4c.92-.95-5.57-5.66-7.04-3.85s-2.51 4.2-2.51 4.2z" opacity=".22" fill="#212121"></path><path d="M27.83 14.04c-1.5.01-2.82.73-3.69 1.82l-1.24-.98c-1.13-.89-2.79-.08-2.78 1.36l.04 5.19c.01 1.44 1.68 2.23 2.79 1.32l1.21-.98c.88 1.09 2.22 1.8 3.73 1.79c2.63-.02 4.75-2.17 4.73-4.8s-2.16-4.74-4.79-4.72z" fill="#616161"></path><path d="M53.13 12.22l-2.65-4.46c-.74-1.24-2.58-1.07-3.08.27l-.55 1.48c-1.31-.49-2.81-.42-4.1.35a4.76 4.76 0 0 0-1.66 6.53a4.76 4.76 0 0 0 6.53 1.66c1.3-.77 2.08-2.07 2.27-3.46l1.54.21c1.42.19 2.44-1.34 1.7-2.58z" fill="#616161"></path><circle cx="104.19" cy="29.3" r="9.12" fill="#424242"></circle><circle cx="104.65" cy="28.59" r="7.08" fill="#d1d1d1"></circle><path d="M42.37 15.11c-.83-1.19-.67-3.41.76-4.42s3.59-.57 4.42.76c.93 1.48-1.5.15-2.93 1.16s-1.25 3.94-2.25 2.5z" fill="#757575"></path><path d="M25.01 17.25c.36-1.41 2.13-2.74 3.83-2.32s2.78 2.33 2.32 3.83c-.51 1.67-1.1-1.04-2.8-1.45c-1.69-.42-3.78 1.64-3.35-.06z" fill="#757575"></path></svg>');

$iconPatient = 'data:image/svg+xml;base64,' . base64_encode('<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	 viewBox="0 0 496 496" xml:space="preserve">
<path style="fill:#50BB75;" d="M416,462.4c0,19.2-12.8,33.6-32.8,33.6H112.8c-20,0-32.8-14.4-32.8-33.6V52.8
	C80,33.6,92.8,16,112.8,16h269.6c20.8,0,33.6,17.6,33.6,36.8V462.4z"/>
<path style="fill:#0AA06E;" d="M80,52.8C80,33.6,92.8,16,112.8,16h269.6c20.8,0,33.6,17.6,33.6,36.8v409.6
	c0,19.2-14.4,33.6-35.2,33.6"/>
<path style="fill:#40406B;" d="M320,36c0,3.2-4.8,4-8,4H184c-3.2,0-8-0.8-8-4V4.8c0-2.4,4.8-4.8,8-4.8h128c3.2,0,8,2.4,8,4.8V36z"/>
<rect x="128" y="72" style="fill:#EAEAEA;" width="240" height="376"/>
<polyline style="fill:#DDDDDD;" points="128,72 368,72 368,448 "/>
<rect x="160" y="104" style="fill:#A8A8A8;" width="56" height="56"/>
<g>
	<rect x="152" y="184" style="fill:#C4C4C4;" width="192" height="16"/>
	<rect x="152" y="232" style="fill:#C4C4C4;" width="192" height="16"/>
	<rect x="152" y="280" style="fill:#C4C4C4;" width="192" height="16"/>
	<rect x="152" y="328" style="fill:#C4C4C4;" width="192" height="16"/>
	<rect x="152" y="376" style="fill:#C4C4C4;" width="88" height="16"/>
</g>
<polygon style="fill:#F15249;" points="344,376 320,376 320,360 296,360 296,376 272,376 272,400 296,400 296,424 320,424 320,400 
	344,400 "/>
<rect x="248" y="112" style="fill:#E88610;" width="96" height="32"/>
</svg>');

$iconCalendar = 'data:image/svg+xml;base64,' . base64_encode('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#3b82f6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>');

$iconWeight = 'data:image/svg+xml;base64,' . base64_encode('<svg width="800px" height="800px" viewBox="0 0 1024 1024" class="icon"  version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M521.264 474.672a63.488 63.488 0 0 1-23.368-4.464c-33.216-13.104-49.664-51.04-36.752-84.736 0.416-1.08 41.728-108.904 65.04-173.944 4.432-12.376 5.32-20.232 5.256-23.848-4.464-2.56-19.76-9.232-57.832-9.232H294.848c-38.072 0-53.376 6.672-57.832 9.232-0.064 3.616 0.824 11.472 5.256 23.84 23.32 65.04 64.632 172.864 65.04 173.944 12.912 33.696-3.544 71.632-36.752 84.736-33.192 13.096-70.6-3.584-83.52-37.28-1.712-4.472-42.24-110.248-66.04-176.664-25.304-70.6-8.808-117.016 9.488-143.528 30.288-43.864 86.44-62.064 166.752-62.064H470.72c80.312 0 136.952 18.192 167.248 62.064 18.296 26.512 34.8 72.928 9.488 143.528-23.8 66.408-64.328 172.192-66.048 176.664-9.92 25.904-34.32 41.752-60.144 41.752z" fill="#B9E3ED" /><path d="M247.208 490.672c-32.992 0-63.168-20.896-75.104-52.016-1.712-4.464-42.176-110.056-66.168-177-27.592-76.984-9.04-128.416 11.384-158.016 32.048-46.408 90.896-68.976 179.92-68.976H470.72c89.344 0 148.36 22.56 180.416 68.968 20.432 29.6 38.984 81.032 11.384 158.024-23.936 66.784-64.456 172.52-66.168 176.992-11.928 31.112-42.104 52.016-75.088 52.016a79.312 79.312 0 0 1-29.248-5.584c-41.28-16.288-61.832-63.544-45.816-105.344 0.408-1.056 41.688-108.808 64.92-173.616 1.096-3.056 1.912-5.696 2.52-7.96-7.616-1.84-20.248-3.72-40.032-3.72H294.848c-19.792 0-32.424 1.88-40.032 3.72 0.608 2.256 1.424 4.904 2.52 7.96 23.232 64.8 64.512 172.552 64.92 173.6 16.024 41.816-4.528 89.064-45.816 105.352a79.04 79.04 0 0 1-29.232 5.6z m50.024-424c-78.8 0-127.6 17.52-153.584 55.152-16.168 23.424-30.608 64.832-7.592 129.04 23.872 66.616 64.216 171.888 65.92 176.336 7.336 19.12 25.08 31.48 45.216 31.472 5.976 0 11.856-1.128 17.488-3.344 25.032-9.872 37.448-38.64 27.68-64.128-0.4-1.04-41.816-109.144-65.16-174.272-5.56-15.52-6.264-25.16-6.184-29.52a15.984 15.984 0 0 1 8.032-13.6c7.384-4.24 25.76-11.352 65.8-11.352h178.76c40.024 0 58.4 7.112 65.792 11.352a16 16 0 0 1 8.032 13.6c0.08 4.36-0.624 14-6.184 29.52-23.352 65.128-64.768 173.232-65.168 174.288-9.768 25.472 2.648 54.24 27.68 64.112a47.424 47.424 0 0 0 17.504 3.344c20.136 0 37.88-12.352 45.208-31.472 1.712-4.456 42.112-109.872 65.928-176.336 23.016-64.208 8.576-105.616-7.592-129.04-25.632-37.112-76.032-55.152-154.08-55.152H297.232z" fill="#324654" /><path d="M911.088 876.168c0 45.008-168.08 78.504-378.68 78.504-210.608 0-384-33.496-384-78.504s170.728-81.504 381.336-81.504c210.6 0.008 381.344 36.496 381.344 81.504z" fill="#B8CBCD" /><path d="M386.968 556.184m-287.28 0a287.28 287.28 0 1 0 574.56 0 287.28 287.28 0 1 0-574.56 0Z" fill="#B9E3ED" /><path d="M386.968 859.472c-167.232 0-303.28-136.056-303.28-303.288s136.048-303.288 303.28-303.288 303.28 136.056 303.28 303.288-136.048 303.288-303.28 303.288z m0-574.568c-149.584 0-271.28 121.696-271.28 271.288 0 149.584 121.696 271.288 271.28 271.288 149.584 0 271.28-121.696 271.28-271.288S536.56 284.904 386.968 284.904z" fill="#324654" /><path d="M207.576 801.168a23.92 23.92 0 0 1-16.968-7.024C131.776 735.32 99.272 657.6 99.072 575.304c-0.2-82.432 32.048-160.192 90.816-218.96 121.608-121.608 311.816-121.904 433.032-0.704a24 24 0 1 1-33.944 33.944c-102.176-102.184-262.568-101.864-365.144 0.696-49.664 49.672-76.928 115.336-76.76 184.904 0.168 69.52 27.68 135.232 77.472 185.016a24 24 0 0 1-16.968 40.968z" fill="#FFFFFF" /><path d="M386.968 867.472c-171.64 0-311.28-139.64-311.28-311.288 0-72.472 21.656-144.2 58.424-195.08a6247.44 6247.44 0 0 1-35.704-96.744c-28.736-80.176-9.16-134.12 12.328-165.256 33.656-48.736 94.664-72.432 186.504-72.432H470.72c92.168 0 153.336 23.688 187 72.424 21.496 31.144 41.072 85.088 12.336 165.272a7214.104 7214.104 0 0 1-37.296 100.92 311.304 311.304 0 0 1 65.496 190.904c-0.008 171.64-139.648 311.28-311.288 311.28z m-89.736-792.8c-75.936 0-122.648 16.424-147 51.696-15.104 21.88-28.512 60.776-6.648 121.792 10.808 30.16 23.192 63.616 40.144 108.488a24 24 0 0 1-3.888 23.696c-35.168 42.896-56.152 108.632-56.152 175.84 0 145.176 118.112 263.288 263.28 263.288s263.28-118.112 263.28-263.288a263.28 263.28 0 0 0-63.064-170.864 24 24 0 0 1-4.208-24.064c17.808-47.176 31.904-85.224 41.888-113.088 21.872-61.016 8.456-99.912-6.648-121.8-24.024-34.784-72.272-51.696-147.496-51.696H297.232z m-27.904 234.424a24.008 24.008 0 0 1-22.472-15.576 5142.592 5142.592 0 0 1-27.168-73.888c-5.696-15.888-6.768-26.368-6.656-32.36a24 24 0 0 1 12.048-20.4c9.864-5.664 27.544-12.2 67.344-12.2h184c39.784 0 57.104 6.528 66.976 12.192a24.016 24.016 0 0 1 12.056 20.408c0.104 5.992-0.968 16.472-6.656 32.352a5122.128 5122.128 0 0 1-26.248 71.408 23.984 23.984 0 0 1-31.68 13.752c-27.744-11.512-66.608-18.12-106.632-18.12-38.816 0-74.248 6.872-105.304 20.424a23.96 23.96 0 0 1-9.608 2.008z m-4.136-104.752c5.712 15.92 11.344 31.336 18.168 49.728 30.984-10.232 64.8-15.4 100.864-15.4 36.616 0 71.776 4.736 101.552 13.536a4533.336 4533.336 0 0 0 17.48-47.856c-7.04-1.056-16.712-1.896-29.656-1.896H294.848c-12.944 0-22.616 0.84-29.656 1.888z" fill="#324654" /><path d="M386.968 859.472c-167.232 0-303.28-136.056-303.28-303.288s136.048-303.288 303.28-303.288 303.28 136.056 303.28 303.288-136.048 303.288-303.28 303.288z m0-574.568c-149.584 0-271.28 121.696-271.28 271.288 0 149.584 121.696 271.288 271.28 271.288 149.584 0 271.28-121.696 271.28-271.288S536.56 284.904 386.968 284.904z" fill="#324654" /><path d="M353.88 852.088c-71.376 0.008-140.976-27.736-196.936-83.696a23.984 23.984 0 0 1 0-33.936 23.984 23.984 0 0 1 33.936 0c98.16 98.152 247.944 90.856 356.16-17.352 109.848-109.856 119.32-253.824 23.032-350.112a23.984 23.984 0 0 1 0-33.936 23.984 23.984 0 0 1 33.936 0c116.272 116.272 106.8 288.152-23.024 417.992-67.144 67.136-148.216 101.04-227.104 101.04z" fill="#324654" /><path d="M404.408 690.672a16 16 0 0 1-16-16v-48h-80a16 16 0 0 1-13.528-24.544l96-152a16 16 0 0 1 29.528 8.536v136h32a16 16 0 0 1 0 32h-32v48a16 16 0 0 1-16 16.008z m-66.976-96h50.976V513.968l-50.976 80.704z" fill="#324654" /><path d="M665.16 640.472A50.936 50.936 0 0 1 617.696 608c-1.264-3.256-31.264-80.416-48.88-128.872-19.184-52.768-6.56-87.624 7.408-107.56 23.048-32.904 63.664-48.896 124.184-48.896h132.224c60.52 0 101.136 15.992 124.184 48.896 13.968 19.944 26.592 54.792 7.408 107.56-17.616 48.456-47.608 125.616-48.88 128.872a50.912 50.912 0 0 1-94.896-36.904c0.312-0.792 30.856-79.376 48.088-126.76 2.608-7.168 3.4-11.808 3.624-14.408-4.352-1.936-19.744-3.256-43.744-3.256h-128c-24 0-35.168 1.328-39.52 3.256 0.216 2.6 1.016 7.24 3.624 14.408 17.232 47.4 47.776 125.968 48.08 126.76a50.912 50.912 0 0 1-47.44 69.376z" fill="#B2EDA6" /><path d="M867.888 656.48a66.744 66.744 0 0 1-24.248-4.56c-34.384-13.384-51.488-52.232-38.112-86.616 0.296-0.76 28.984-74.56 46.368-122.08-5.6-0.312-13.232-0.544-23.496-0.544h-128c-8.296 0-14.584 0.168-19.328 0.4 15.272 41.744 39.056 103.24 46.176 121.576 13.624 35.024-3.464 73.88-37.856 87.256a66.704 66.704 0 0 1-24.24 4.56 66.52 66.52 0 0 1-62.368-42.664c-3.288-8.472-32.048-82.56-49-129.208-21.544-59.24-6.816-99.152 9.336-122.208 26.264-37.496 71.168-55.712 137.288-55.712h132.224c66.12 0 111.032 18.224 137.288 55.712 16.144 23.056 30.88 62.968 9.336 122.208-17.944 49.36-48.704 128.44-49.008 129.208a66.48 66.48 0 0 1-62.36 42.672zM700.408 410.672h128c39.808 0 47.384 3.368 50.24 4.64a16 16 0 0 1 9.448 15.96c-0.44 5.248-1.968 11.48-4.528 18.528-17.288 47.536-47.912 126.32-48.216 127.096a34.96 34.96 0 0 0 32.536 47.576 34.68 34.68 0 0 0 32.536-22.272c0.312-0.792 30.928-79.512 48.76-128.544 16.832-46.304 6.312-76.08-5.48-92.912-19.832-28.312-56.168-42.072-111.08-42.072H700.408c-54.912 0-91.248 13.76-111.08 42.072-11.792 16.832-22.312 46.616-5.48 92.912 16.848 46.328 45.488 120.12 48.696 128.384 5.328 13.688 18.104 22.432 32.608 22.432a34.96 34.96 0 0 0 32.52-47.576c-7.648-19.712-32.944-85.104-48.208-127.096-2.56-7.04-4.088-13.272-4.528-18.536a16 16 0 0 1 9.448-15.96c5.424-2.4 14.744-4.632 46.024-4.632z" fill="#3C663E" /><path d="M765.808 707.8m-198.872 0a198.872 198.872 0 1 0 397.744 0 198.872 198.872 0 1 0-397.744 0Z" fill="#B2EDA6" /><path d="M765.808 922.672c-118.48 0-214.872-96.392-214.872-214.872 0-118.488 96.392-214.872 214.872-214.872 118.488 0 214.88 96.392 214.88 214.872 0 118.48-96.4 214.872-214.88 214.872z m0-397.752c-100.832 0-182.872 82.04-182.872 182.872s82.032 182.872 182.872 182.872c100.84 0 182.88-82.04 182.88-182.872s-82.04-182.872-182.88-182.872z" fill="#3C663E" /><path d="M911.088 571.992c53.6 95.68 47.648 175.184-30.016 252.848-77.664 77.672-203.584 77.672-281.248 0" fill="#B2EDA6" /><path d="M740.448 899.088c-57.392 0-111.352-22.352-151.936-62.936a16 16 0 1 1 22.624-22.624 181.696 181.696 0 0 0 129.312 53.56 181.696 181.696 0 0 0 129.312-53.56c70.168-70.168 78.608-142.248 27.368-233.712a16.008 16.008 0 0 1 27.928-15.64c58.624 104.656 48.24 191.08-32.664 271.984-40.592 40.576-94.552 62.928-151.944 62.928z" fill="#3C663E" /><path d="M650.632 883.648a15.936 15.936 0 0 1-11.312-4.688c-40.584-40.584-62.936-94.544-62.936-151.936 0-57.392 22.352-111.352 62.936-151.936 40.648-40.656 93.224-63.296 148.024-63.744h1.656c54.504 0 106.52 22.024 146.632 62.144a16 16 0 1 1-22.624 22.624c-34.4-34.4-78.952-53.16-125.4-52.76-46.352 0.376-90.984 19.688-125.664 54.368a181.696 181.696 0 0 0-53.56 129.312 181.696 181.696 0 0 0 53.56 129.312 16 16 0 0 1-11.312 27.304z" fill="#FFFFFF" /><path d="M810.528 810.672H721.112a16 16 0 0 1-16-16c0-25.312 22.184-45.632 45.68-67.144 18.296-16.76 39.032-35.752 39.032-50.504 0-19.2-16.168-26.352-26.352-26.352-11.6 0-31.064 4.032-31.064 31.056a16 16 0 0 1-32 0c0-43.56 31.672-63.056 63.064-63.056 28.68 0 58.352 21.832 58.352 58.352 0 28.84-25.128 51.856-49.424 74.104-9.44 8.648-20.272 18.568-27.416 27.544h65.544a16 16 0 0 1 0 32z" fill="#3C663E" /><path d="M765.808 930.672c-125.016 0-226.728-99.984-226.728-222.872 0-47.008 15.408-98.712 39.92-135.848-2.216-5.656-4.552-11.56-6.968-17.656-8.288-20.96-17.68-44.72-25.768-66.968-22.712-62.472-6.936-104.92 10.304-129.528 27.864-39.784 74.92-59.128 143.84-59.128h132.224c68.92 0 115.976 19.336 143.84 59.128 17.24 24.608 33.024 67.056 10.304 129.536a5164.288 5164.288 0 0 1-32.072 85.36c22.432 35.32 36.04 85.648 36.04 135.104-0.008 122.888-100.912 222.872-224.936 222.872z m-65.4-584c-52.112 0-86.304 12.648-104.528 38.664-15.344 21.904-16.904 51.504-4.504 85.592 7.856 21.616 17.128 45.048 25.296 65.72 4.24 10.712 8.256 20.88 11.8 30.056a24.008 24.008 0 0 1-3.472 23.408c-22.68 29.048-37.92 76.344-37.92 117.688 0 94.792 81.848 174.872 178.728 174.872 97.56 0 176.936-78.448 176.936-174.872 0-44.304-13.36-90.32-34.04-117.224a23.984 23.984 0 0 1-3.36-23.264 5426.312 5426.312 0 0 0 36.328-96.376c12.392-34.088 10.832-63.688-4.504-85.592-18.224-26.016-52.416-38.664-104.528-38.664H700.408z m141.544 192.576c-3 0-6-0.56-8.84-1.688-17.424-6.904-40.696-10.56-67.296-10.56-28.76 0-50.52 3.024-66.536 9.248a24.032 24.032 0 0 1-31.112-13.792 4324.984 4324.984 0 0 1-26.208-69.928c-2.808-7.696-4.48-14.632-4.976-20.592a24 24 0 0 1 14.16-23.944c7.192-3.2 18.328-5.328 49.272-5.328h128c41.504 0 49.6 3.6 53.488 5.328a24 24 0 0 1 14.168 23.944c-0.504 5.952-2.176 12.88-4.984 20.592a4459.76 4459.76 0 0 1-26.72 71.296 23.992 23.992 0 0 1-22.416 15.424z m-76.144-60.248c16.824 0 39.36 1.328 61.728 6.672 4.872-12.848 9.104-24.16 13.064-34.88-3.552-0.08-7.6-0.128-12.192-0.128h-128c-2.92 0-5.576 0.016-7.992 0.056 3.84 10.408 7.928 21.32 12.696 33.888 17.224-3.76 37.296-5.608 60.696-5.608z" fill="#3C663E" /><path d="M765.808 922.672c-118.48 0-214.872-96.392-214.872-214.872 0-118.488 96.392-214.872 214.872-214.872 118.488 0 214.88 96.392 214.88 214.872 0 118.48-96.4 214.872-214.88 214.872z m0-397.752c-100.832 0-182.872 82.04-182.872 182.872s82.032 182.872 182.872 182.872c100.84 0 182.88-82.04 182.88-182.872s-82.04-182.872-182.88-182.872z" fill="#3C663E" /></svg>');

$iconHeight = 'data:image/svg+xml;base64,' . base64_encode('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#3b82f6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 18h12"></path><path d="M6 6h12"></path><path d="M13 13h2"></path><path d="M13 9h2"></path><path d="M9 13h2"></path><path d="M9 9h2"></path><path d="M18 18v3"></path><path d="M18 3v3"></path><path d="M6 18v3"></path><path d="M6 3v3"></path></svg>');

$iconRisk = 'data:image/svg+xml;base64,' . base64_encode('<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	 viewBox="0 0 392.663 392.663" xml:space="preserve">
<path style="fill:#194F82;" d="M381.77,370.812h-8.598V134.594c0-18.036-14.675-32.711-32.711-32.711h-21.01V21.851h0.453
	c6.012,0,10.925-4.848,10.925-10.925S325.915,0,319.838,0h-97.875c-6.012,0-10.925,4.848-10.925,10.925s4.848,10.925,10.925,10.925
	h0.453v79.968h-51.911V21.851h0.453c6.012,0,10.925-4.848,10.925-10.925S176.905,0,170.893,0H72.889
	c-6.012,0-10.925,4.848-10.925,10.925s4.848,10.925,10.925,10.925h0.453v79.968H52.267c-18.036,0-32.711,14.675-32.711,32.711
	v236.218h-8.598c-6.012,0-10.925,4.848-10.925,10.925c0,6.012,4.848,10.99,10.925,10.99h370.747c6.012,0,10.925-4.848,10.925-10.925
	C392.63,375.661,387.782,370.812,381.77,370.812z M244.137,21.851H297.6v127.483h-53.463L244.137,21.851L244.137,21.851z
	 M244.137,171.248H297.6v70.982c0,14.545-11.83,26.376-26.376,26.376h-0.776c-14.545,0-26.376-11.83-26.376-26.376v-70.982H244.137z
	 M95.127,21.851h53.463v160.323H95.127V21.851z M95.127,203.96h53.463v38.271c0,14.545-11.83,26.376-26.376,26.376h-0.776
	c-14.545,0-26.376-11.83-26.376-26.376C95.127,242.23,95.127,203.96,95.127,203.96z M351.386,370.812H41.341V134.594
	c0-6.012,4.848-10.925,10.925-10.925h21.075V242.23c0,26.57,21.657,48.162,48.162,48.162h0.776c26.57,0,48.162-21.657,48.162-48.162
	V123.669h51.911V242.23c0,26.57,21.657,48.162,48.162,48.162h0.776c26.57,0,48.162-21.657,48.162-48.162V123.669h21.01
	c6.012,0,10.925,4.848,10.925,10.925L351.386,370.812L351.386,370.812z"/>
<rect x="244.137" y="21.851" style="fill:#FFFFFF;" width="53.463" height="127.483"/>
<path style="fill:#FFC10D;" d="M244.137,242.23c0,14.545,11.83,26.376,26.376,26.376h0.776c14.545,0,26.376-11.83,26.376-26.376
	v-70.982h-53.463v70.982H244.137z"/>
<rect x="95.127" y="21.851" style="fill:#FFFFFF;" width="53.463" height="160.323"/>
<path style="fill:#56ACE0;" d="M95.127,242.23c0,14.545,11.83,26.376,26.376,26.376h0.776c14.545,0,26.376-11.83,26.376-26.376
	V203.96H95.192v38.271H95.127z"/>
</svg>');

$iconPulse = 'data:image/svg+xml;base64,' . base64_encode('<svg height="800px" width="800px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	 viewBox="0 0 512 512" xml:space="preserve">
<g>
	<path style="fill:#FFC61B;" d="M222.717,366.95c-5.752,0-11.078-3.24-13.692-8.463l-41.575-83.069l-23.142,35.614
		c-2.826,4.347-7.659,6.971-12.844,6.971H15.318C6.858,318.002,0,311.144,0,302.684s6.858-15.318,15.318-15.318h107.833
		l33.184-51.067c2.993-4.604,8.232-7.242,13.703-6.948c5.484,0.308,10.381,3.528,12.839,8.438l35.382,70.697l35.928-136.243
		c1.659-6.289,7.109-10.846,13.593-11.363c6.475-0.519,12.588,3.117,15.223,9.063l26.233,59.206l22.079-34.224
		c2.802-4.341,7.602-6.979,12.769-7.014c5.24-0.052,10.002,2.538,12.862,6.841l22.964,34.573h116.773
		c8.46,0,15.318,6.858,15.318,15.318s-6.858,15.318-15.318,15.318H371.695c-5.131,0-9.921-2.569-12.76-6.842l-14.562-21.924
		l-24.776,38.406c-3.051,4.73-8.457,7.408-14.065,6.968c-5.612-0.438-10.531-3.92-12.812-9.066l-20.043-45.236l-35.143,133.27
		c-1.625,6.162-6.896,10.675-13.234,11.33C223.769,366.922,223.242,366.95,222.717,366.95z"/>
	<path style="fill:#FFC61B;" d="M247.875,478.107c-2.226,0-4.453-0.484-6.516-1.455c-73.068-34.345-146.415-97.757-191.42-165.49
		c-3.125-4.701-3.41-10.741-0.741-15.716c2.667-4.975,7.855-8.079,13.499-8.079h60.454l33.184-51.068
		c2.992-4.604,8.227-7.256,13.703-6.948c5.484,0.308,10.381,3.528,12.839,8.438l35.382,70.697l35.928-136.243
		c1.659-6.289,7.109-10.846,13.593-11.363c6.475-0.519,12.588,3.117,15.223,9.063l26.233,59.206l22.079-34.224
		c2.802-4.341,7.602-6.979,12.769-7.014c0.034,0,0.069,0,0.103,0c5.128,0,9.92,2.567,12.76,6.842l27.509,41.416
		c4.681,7.048,2.763,16.554-4.283,21.235c-7.049,4.68-16.555,2.762-21.235-4.283l-14.564-21.924l-24.775,38.406
		c-3.053,4.73-8.466,7.408-14.065,6.968c-5.612-0.438-10.531-3.92-12.812-9.067l-20.043-45.236l-35.143,133.27
		c-1.625,6.162-6.896,10.675-13.234,11.33c-6.349,0.651-12.423-2.682-15.275-8.38l-41.575-83.069l-23.142,35.614
		c-2.826,4.347-7.659,6.971-12.844,6.971H92.704c40.558,51.659,98.551,99.672,155.172,127.775
		c52.656-26.141,107.401-69.974,147.65-118.421c5.407-6.508,15.062-7.4,21.57-1.994c6.507,5.406,7.4,15.063,1.994,21.57
		C374.449,400.67,312.88,449.161,254.392,476.653C252.328,477.623,250.1,478.107,247.875,478.107z"/>
</g>
<path style="fill:#FEE187;" d="M169.179,244.646l53.544,106.986l46.275-175.482l37.727,85.149l37.461-58.069l27.51,41.416h91.694
	c3.762-10.019,6.72-20.013,8.743-29.903c2.085-10.218,3.215-20.38,3.215-30.324c0-74.655-59.694-135.207-133.342-135.207
	c-36.73,0-69.986,15.082-94.132,39.444c-24.145-24.363-57.401-39.444-94.132-39.444c-73.646,0-133.342,60.552-133.342,135.207
	c0,9.944,1.13,20.106,3.215,30.324c5.946,29.077,19.87,59.031,39.08,87.943h68.767L169.179,244.646z"/>
<path style="fill:#FFC61B;" d="M222.717,366.95c-5.752,0-11.078-3.24-13.692-8.461l-41.575-83.069l-23.142,35.614
	c-2.826,4.347-7.659,6.971-12.844,6.971H62.697c-5.13,0-9.92-2.567-12.758-6.841c-21.318-32.081-35.221-63.49-41.329-93.35
	c-2.339-11.474-3.525-22.707-3.525-33.394c0-83,66.688-150.525,148.659-150.525c34.693,0,67.609,11.981,94.132,34.011
	c26.523-22.03,59.439-34.011,94.132-34.011c81.971,0,148.658,67.525,148.658,150.525c0,10.692-1.186,21.924-3.523,33.386
	c-2.134,10.434-5.3,21.275-9.411,32.225c-2.242,5.975-7.958,9.933-14.34,9.933h-91.695c-5.131,0-9.921-2.569-12.76-6.842
	l-14.563-21.924l-24.776,38.406c-3.051,4.73-8.457,7.408-14.065,6.968c-5.612-0.438-10.531-3.92-12.812-9.067l-20.043-45.236
	l-35.143,133.27c-1.625,6.162-6.896,10.675-13.234,11.33C223.769,366.922,223.241,366.95,222.717,366.95z M169.177,229.328
	c0.286,0,0.573,0.008,0.861,0.025c5.484,0.308,10.381,3.528,12.839,8.438l35.382,70.697l35.928-136.243
	c1.659-6.289,7.109-10.846,13.593-11.363c6.475-0.519,12.588,3.117,15.223,9.063l26.233,59.206l22.079-34.224
	c2.802-4.341,7.602-6.979,12.769-7.014c5.24-0.052,10.004,2.538,12.862,6.841l22.964,34.573h72.584
	c1.91-6.017,3.46-11.925,4.632-17.655c1.927-9.445,2.904-18.616,2.904-27.255c0-66.108-52.944-119.89-118.022-119.89
	c-31.375,0-60.943,12.398-83.251,34.909c-2.877,2.903-6.793,4.536-10.88,4.536s-8.003-1.633-10.88-4.536
	c-22.309-22.511-51.876-34.909-83.251-34.909c-65.079,0-118.024,53.782-118.024,119.89c0,8.636,0.977,17.808,2.906,27.264
	c4.889,23.909,15.78,49.343,32.398,75.686h52.126l33.184-51.068C159.17,231.937,164.012,229.328,169.177,229.328z"/>
</svg>');

$iconQuestion = 'data:image/svg+xml;base64,' . base64_encode('<svg height="800px" width="800px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	 viewBox="0 0 512.001 512.001" xml:space="preserve">
<path style="fill:#E4EAF8;" d="M450.671,156.853H9.013c-4.978,0-9.013-4.036-9.013-9.013V39.678c0-4.978,4.036-9.013,9.013-9.013
	h441.658c4.978,0,9.013,4.036,9.013,9.013v108.161C459.685,152.817,455.649,156.853,450.671,156.853z"/>
<path style="fill:#FF5050;" d="M108.161,156.853H9.013c-4.978,0-9.013-4.036-9.013-9.013V39.678c0-4.978,4.036-9.013,9.013-9.013
	h99.148c4.978,0,9.013,4.036,9.013,9.013v108.161C117.175,152.817,113.139,156.853,108.161,156.853z"/>
<path style="fill:#707487;" d="M306.457,84.745H153.228c-4.982,0-9.013-4.031-9.013-9.013s4.031-9.013,9.013-9.013h153.228
	c4.982,0,9.013,4.031,9.013,9.013S311.439,84.745,306.457,84.745z"/>
<g>
	<path style="fill:#7F8499;" d="M414.618,120.799H243.363c-4.982,0-9.013-4.031-9.013-9.013s4.031-9.013,9.013-9.013h171.255
		c4.982,0,9.013,4.031,9.013,9.013S419.6,120.799,414.618,120.799z"/>
	<path style="fill:#7F8499;" d="M207.309,120.799h-54.081c-4.982,0-9.013-4.031-9.013-9.013s4.031-9.013,9.013-9.013h54.081
		c4.982,0,9.013,4.031,9.013,9.013S212.291,120.799,207.309,120.799z"/>
</g>
<g>
	<path style="fill:#FFFFFF;" d="M58.587,111.786c-4.982,0-9.013-4.031-9.013-9.013s4.031-9.013,9.013-9.013
		c7.455,0,13.52-6.065,13.52-13.52s-6.065-13.52-13.52-13.52s-13.52,6.065-13.52,13.52c0,4.982-4.031,9.013-9.013,9.013
		s-9.013-4.031-9.013-9.013c0-17.394,14.154-31.547,31.547-31.547s31.547,14.154,31.547,31.547S75.981,111.786,58.587,111.786z"/>
	<path style="fill:#FFFFFF;" d="M58.675,138.826c-4.982,0-9.057-4.031-9.057-9.013c0-4.982,3.987-9.013,8.969-9.013h0.088
		c4.982,0,9.013,4.031,9.013,9.013C67.689,134.795,63.657,138.826,58.675,138.826z"/>
</g>
<path style="fill:#E4EAF8;" d="M450.671,319.094H9.013c-4.978,0-9.013-4.036-9.013-9.013V201.92c0-4.978,4.036-9.013,9.013-9.013
	h441.658c4.978,0,9.013,4.036,9.013,9.013v108.161C459.685,315.059,455.649,319.094,450.671,319.094z"/>
<path style="fill:#FFDC64;" d="M108.161,319.094H9.013c-4.978,0-9.013-4.036-9.013-9.013V201.92c0-4.978,4.036-9.013,9.013-9.013
	h99.148c4.978,0,9.013,4.036,9.013,9.013v108.161C117.175,315.059,113.139,319.094,108.161,319.094z"/>
<path style="fill:#707487;" d="M306.457,246.987H153.228c-4.982,0-9.013-4.031-9.013-9.013c0-4.982,4.031-9.013,9.013-9.013h153.228
	c4.982,0,9.013,4.031,9.013,9.013C315.47,242.956,311.439,246.987,306.457,246.987z"/>
<path style="fill:#7F8499;" d="M207.309,283.041h-54.081c-4.982,0-9.013-4.031-9.013-9.013c0-4.982,4.031-9.013,9.013-9.013h54.081
	c4.982,0,9.013,4.031,9.013,9.013C216.322,279.009,212.291,283.041,207.309,283.041z"/>
<g>
	<path style="fill:#FFFFFF;" d="M58.587,274.027c-4.982,0-9.013-4.031-9.013-9.013c0-4.982,4.031-9.013,9.013-9.013
		c7.455,0,13.52-6.065,13.52-13.52c0-7.455-6.065-13.52-13.52-13.52s-13.52,6.065-13.52,13.52c0,4.982-4.031,9.013-9.013,9.013
		s-9.013-4.031-9.013-9.013c0-17.393,14.154-31.547,31.547-31.547s31.547,14.154,31.547,31.547S75.981,274.027,58.587,274.027z"/>
	<path style="fill:#FFFFFF;" d="M58.675,301.068c-4.982,0-9.057-4.031-9.057-9.013s3.987-9.013,8.969-9.013h0.088
		c4.982,0,9.013,4.031,9.013,9.013S63.657,301.068,58.675,301.068z"/>
</g>
<path style="fill:#E4EAF8;" d="M450.671,481.336H9.013C4.036,481.336,0,477.3,0,472.323V364.162c0-4.978,4.036-9.013,9.013-9.013
	h441.658c4.978,0,9.013,4.036,9.013,9.013v108.161C459.685,477.3,455.649,481.336,450.671,481.336z"/>
<path style="fill:#7DF5A5;" d="M108.161,481.336H9.013C4.036,481.336,0,477.3,0,472.323V364.162c0-4.978,4.036-9.013,9.013-9.013
	h99.148c4.978,0,9.013,4.036,9.013,9.013v108.161C117.175,477.3,113.139,481.336,108.161,481.336z"/>
<path style="fill:#707487;" d="M306.457,409.229H153.228c-4.982,0-9.013-4.031-9.013-9.013s4.031-9.013,9.013-9.013h153.228
	c4.982,0,9.013,4.031,9.013,9.013S311.439,409.229,306.457,409.229z"/>
<path style="fill:#7F8499;" d="M207.309,445.282h-54.081c-4.982,0-9.013-4.031-9.013-9.013s4.031-9.013,9.013-9.013h54.081
	c4.982,0,9.013,4.031,9.013,9.013S212.291,445.282,207.309,445.282z"/>
<g>
	<path style="fill:#FFFFFF;" d="M58.587,436.269c-4.982,0-9.013-4.031-9.013-9.013s4.031-9.013,9.013-9.013
		c7.455,0,13.52-6.065,13.52-13.52s-6.065-13.52-13.52-13.52s-13.52,6.065-13.52,13.52c0,4.982-4.031,9.013-9.013,9.013
		s-9.013-4.031-9.013-9.013c0-17.394,14.154-31.547,31.547-31.547s31.547,14.154,31.547,31.547S75.981,436.269,58.587,436.269z"/>
	<path style="fill:#FFFFFF;" d="M58.675,463.309c-4.982,0-9.057-4.031-9.057-9.013c0-4.982,3.987-9.013,8.969-9.013h0.088
		c4.982,0,9.013,4.031,9.013,9.013C67.689,459.278,63.657,463.309,58.675,463.309z"/>
</g>
<g>
	<path style="fill:#D5DCED;" d="M450.671,355.148h-45.067v53.47c0,12.43,10.114,22.541,22.546,22.541
		c4.384,0,8.65-1.277,12.337-3.692l3.616-2.371l15.582,37.618v-98.553C459.685,359.183,455.649,355.148,450.671,355.148z"/>
	<path style="fill:#D5DCED;" d="M444.073,280.636c-4.262-4.262-9.909-6.609-15.902-6.609c-12.443,0-22.566,10.113-22.566,22.543
		v22.525h45.067c4.978,0,9.013-4.036,9.013-9.013v-13.832L444.073,280.636z"/>
</g>
<path style="fill:#464655;" d="M423.631,296.57v112.048c0,3.584,3.979,5.734,6.978,3.769l21.819-14.3l27.947,67.471
	c1.905,4.599,7.178,6.783,11.776,4.879l13.664-5.66c4.599-1.905,6.783-7.178,4.879-11.777l-27.947-67.471l25.638-5.189
	c3.523-0.713,4.835-5.062,2.293-7.604l-79.352-79.352C428.486,290.543,423.631,292.554,423.631,296.57z"/>
<g>
	<path style="fill:#7F8499;" d="M396.591,283.041H243.363c-4.978,0-9.013-4.036-9.013-9.013l0,0c0-4.978,4.036-9.013,9.013-9.013
		h153.228c4.978,0,9.013,4.036,9.013,9.013l0,0C405.604,279.005,401.569,283.041,396.591,283.041z"/>
	<path style="fill:#7F8499;" d="M396.591,445.282H243.363c-4.978,0-9.013-4.036-9.013-9.013l0,0c0-4.978,4.036-9.013,9.013-9.013
		h153.228c4.978,0,9.013,4.036,9.013,9.013l0,0C405.604,441.247,401.569,445.282,396.591,445.282z"/>
</g>
</svg>');

// Decodificar el JSON de respuesta_analisis si existe
$analisis = isset($test['test']['respuesta_analisis']) ? json_decode($test['test']['respuesta_analisis'], true) : [];
?>

<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Informe Médico - Evaluación de Riesgo de Diabetes</title>
    <style>
        body {
            font-family: 'Helvetica', 'Arial', sans-serif;
            font-size: 11pt;
            line-height: 1.4;
            color: #333;
            margin: 0;
            padding: 0;
        }

        .document {
            padding: 20px;
        }

        .header {
            border-bottom: 1px solid #ddd;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        .clinic-info {
            text-align: center;
            margin-bottom: 10px;
        }

        .clinic-name {
            font-size: 16pt;
            font-weight: bold;

            margin: 0;
        }

        .clinic-address,
        .clinic-contact {
            font-size: 9pt;
            color: #555;
            margin: 3px 0;
        }

        .report-title {
            text-align: center;
            font-size: 14pt;
            font-weight: bold;
            margin: 15px 0;
            text-transform: uppercase;
            color: #1e40af;
        }

        /* .section {
            margin-bottom: 10px;
        } */

        .section-title {
            font-size: 12pt;
            font-weight: bold;
            color: #2563eb;
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .section-title img {
            margin-right: 8px;
            width: 20px;
            height: 20px;
        }

        .patient-data {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .data-group {
            width: 50%;
            margin-bottom: 10px;
        }

        .data-label {
            font-weight: bold;
            color: #555;
            font-size: 10pt;
        }

        .data-value {
            font-size: 11pt;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        th,
        td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
            font-size: 10pt;
        }

        th {
            background-color: #f1f5f9;
            font-weight: bold;
            color: #334155;
        }

        tr:nth-child(even) {
            background-color: #f8fafc;
        }

        .risk-indicator {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 15px 0;
            padding: 10px;
            background-color: #f1f5f9;
            border-radius: 5px;
        }

        .risk-label {
            font-weight: bold;
            font-size: 12pt;
        }

        .risk-value {
            font-size: 12pt;
            font-weight: bold;
            padding: 5px 15px;
            border-radius: 4px;
            color: white;
        }

        .risk-low {
            background-color: #22c55e;
        }

        .risk-moderate {
            background-color: #f59e0b;
        }

        .risk-high {
            background-color: #ef4444;
        }

        .recommendations {
            background-color: #f1f5f9;
            padding: 10px 15px;
            border-left: 4px solid #3b82f6;
            border-radius: 0 4px 4px 0;
        }

        .recommendations-title {
            font-weight: bold;
            color: #3b82f6;
            margin-bottom: 10px;
        }

        .recommendation-item {
            margin-bottom: 8px;
            padding-left: 15px;
            position: relative;
            font-size: 10pt;
        }

        .recommendation-item:before {
            content: "•";
            position: absolute;
            left: 0;
            color: #3b82f6;
        }

        .signature-area {
            margin-top: 40px;
            display: flex;
            justify-content: flex-end;
        }

        .signature-box {
            text-align: center;
            width: 40%;
        }

        .signature-line {
            border-top: 1px solid #777;
            margin-top: 50px;
            padding-top: 5px;
        }

        .footer {
            text-align: center;
            margin-top: 30px;
            font-size: 9pt;
            color: #777;
            border-top: 1px solid #ddd;
            padding-top: 10px;
        }

        .footer p {
            margin: 3px 0;
        }

        .badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 10pt;
            font-weight: bold;
            text-align: center;
        }

        .badge-normal {
            background-color: #22c55e;
            color: white;
        }

        .badge-warning {
            background-color: #f59e0b;
            color: white;
        }

        .badge-danger {
            background-color: #ef4444;
            color: white;
        }

        .diagnostic-summary {
            font-size: 11pt;
            line-height: 1.5;
            margin: 15px 0;
            padding: 0 15px;
        }
    </style>
</head>

<body>
    <div class="document">
        <!-- Encabezado con información de la clínica -->
        <div class="header">
            <div class="clinic-info">
                <h1 class="clinic-name">CENTRO MÉDICO SITED</h1>
                <p class="clinic-address">Av.Grau, Moyobamba, San Martin, Perú</p>
                <p class="clinic-contact">Teléfono: (01) 555-7890 | Email: contacto@sited.pe</p>
            </div>
            <h2 class="report-title">Informe de Evaluación de Tendencia de Diabetes</h2>
        </div>

        <!-- Información del paciente -->
        <div class="section">
            <div class="section-title">
                <img src="<?= $iconPatient ?>" alt="Paciente" style="width: 24px; height: 24px;">
                <span style="line-height: 1;">DATOS DEL PACIENTE</span>
            </div>
            <div class="patient-data">
                <div class="data-group">
                    <div class="data-label">Nombre completo:</div>
                    <div class="data-value"><?= $test['user']['nombre'] ?></div>
                </div>
                <div class="data-group">
                    <div class="data-label">Edad:</div>
                    <div class="data-value"><?= $test['user']['edad'] ?> años</div>
                </div>
                <div class="data-group">
                    <div class="data-label">Sexo:</div>
                    <div class="data-value"><?= $test['user']['sexo'] == 1 ? 'Femenino' : 'Masculino' ?></div>
                </div>
                <div class="data-group">
                    <div class="data-label">Fecha de evaluación:</div>
                    <div class="data-value"><?= date('d/m/Y', strtotime($test['test']['fecha_hora'])) ?></div>
                </div>
            </div>
        </div>

        <!-- Medidas antropométricas -->
        <div class="section">
            <div class="section-title">
                <img src="<?= $iconWeight ?>" alt="Medidas" style="width: 24px; height: 24px;"> MEDIDAS ANTROPOMÉTRICAS
            </div>
            <div class="patient-data">
                <div class="data-group">
                    <div class="data-label">Peso:</div>
                    <div class="data-value"><?= $test['test']['peso'] ?> kg</div>
                </div>
                <div class="data-group">
                    <div class="data-label">Altura:</div>
                    <div class="data-value"><?= $test['test']['altura'] ?> m</div>
                </div>
                <div class="data-group">
                    <div class="data-label">IMC:</div>
                    <div class="data-value">
                        <?= $test['test']['imc'] ?> kg/m²
                        <?php
                        $imcClass = 'badge-normal';
                        $imcText = 'Normal';

                        if ($test['test']['imc'] < 18.5) {
                            $imcClass = 'badge-warning';
                            $imcText = 'Bajo peso';
                        } elseif ($test['test']['imc'] >= 25 && $test['test']['imc'] < 30) {
                            $imcClass = 'badge-warning';
                            $imcText = 'Sobrepeso';
                        } elseif ($test['test']['imc'] >= 30) {
                            $imcClass = 'badge-danger';
                            $imcText = 'Obesidad';
                        }
                        ?>
                        <span class="badge <?= $imcClass ?>"><?= $imcText ?></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Evaluación de riesgo -->
        <div class="section">
            <div class="section-title">
                <img src="<?= $iconRisk ?>" alt="Riesgo" style="width: 24px; height: 24px;"> EVALUACIÓN DE RIESGO DE DIABETES
            </div>

            <?php
            $riskClass = 'risk-moderate';
            if ($test['test']['tendencia_label'] == 'Alto') {
                $riskClass = 'risk-high';
            } elseif ($test['test']['tendencia_label'] == 'Bajo') {
                $riskClass = 'risk-low';
            }
            ?>

            <div class="risk-indicator">
                <div class="risk-label">Nivel de riesgo:</div>
                <div class="risk-value <?= $riskClass ?>"><?= $test['test']['tendencia_label'] ?></div>
            </div>

            <div class="risk-indicator">
                <div class="risk-label">Probabilidad de riesgo:</div>
                <div class="data-value"><?= number_format($test['test']['tendencia_modelo'], 1) ?>%</div>
            </div>

            <div class="diagnostic-summary">
                <p>
                    En base a la evaluación realizada, el paciente presenta un riesgo
                    <strong><?= strtolower($test['test']['tendencia_label']) ?></strong>
                    de desarrollar diabetes mellitus tipo 2. Este resultado se basa en la
                    evaluación de factores de riesgo clínicos y antropométricos, así como
                    en los antecedentes familiares y hábitos de vida reportados por el paciente.
                </p>
            </div>
        </div>

        <!-- Recomendaciones -->
        <?php if (isset($analisis['recomendaciones']) && !empty($analisis['recomendaciones'])): ?>
            <div class="section" style="margin-bottom: 20px;">
                <div class="section-title">
                    <img src="<?= $iconStethoscope ?>" alt="Recomendaciones" style="width: 24px; height: 24px;"> RECOMENDACIONES MÉDICAS
                </div>

                <div class="recommendations">
                    <?php foreach ($analisis['recomendaciones'] as $recomendacion):
                        if (is_array($recomendacion)) {
                            foreach ($recomendacion as $re): ?>
                                <div class="recommendation-item"><?= $re ?></div>
                            <?php endforeach;
                        } else { ?>
                            <div class="recommendation-item"><?= $recomendacion ?></div>
                        <?php } ?>
                    <?php endforeach; ?>
                </div>
            </div>
        <?php endif; ?>

        <!-- Detalle de respuestas (nueva página) -->
        <!-- <pagebreak /> -->

        <div class="section">
            <div class="section-title">
                <img src="<?= $iconQuestion ?>" alt="Respuestas" style="width: 24px; height: 24px;"> DETALLE DE RESPUESTAS
            </div>

            <table>
                <thead>
                    <tr>
                        <th width="65%">Pregunta</th>
                        <th width="35%">Respuesta</th>
                    </tr>
                </thead>
                <tbody>
                    <?php foreach ($test['preguntas'] as $pregunta): ?>
                        <tr>
                            <td><?= $pregunta['pregunta_texto'] ?></td>
                            <td><?= $pregunta['respuesta_texto'] ?></td>
                        </tr>
                    <?php endforeach; ?>
                </tbody>
            </table>
        </div>

        <!-- Pie de página -->
        <div class="footer">
            <p>Este documento ha sido generado automáticamente por el Sistema SITED.</p>
            <p>Esta evaluación de riesgo no constituye un diagnóstico médico definitivo.</p>
            <p>Se recomienda presentar este informe a su médico especialista para una evaluación completa.</p>
            <p>&copy; <?= date('Y') ?> SITED - Sistema Identificacion de Tedencias de Diabetes</p>
        </div>
    </div>
</body>

</html>